{% extends "base.html" %}

{% block title %}Дашборд — FitMacro Planner{% endblock %}

{% block content %}
  <div class="d-flex flex-wrap gap-2 justify-content-between align-items-center mb-3">
    <div>
      <h1 class="h3 mb-1">Дашборд</h1>
      <div class="text-secondary small">Сегодня: {{ today }}</div>
    </div>
    <div class="d-flex gap-2">
      <a class="btn btn-outline-secondary" href="{% url 'nutrition:food_search' %}">Импорт продуктов</a>
      <a class="btn btn-primary" href="{% url 'nutrition:add_meal_item' %}">Добавить еду</a>
      <a class="btn btn-outline-primary" href="{% url 'nutrition:add_weight' %}">Добавить вес</a>
      <a class="btn btn-outline-secondary" href="{% url 'nutrition:set_goal' %}">Цель</a>
    </div>
  </div>

  <div class="row g-4">
    <div class="col-12 col-lg-4">
      <div class="bg-white border rounded-3 p-3 h-100">
        <div class="fw-semibold mb-2">Активная цель</div>
        {% if goal %}
          <div class="display-6 lh-1">{{ goal.daily_kcal_target }}</div>
          <div class="text-secondary">ккал в день</div>
          {% if goal.target_weight_kg %}
            <div class="mt-3 text-secondary small">Цель по весу: {{ goal.target_weight_kg }} кг</div>
          {% endif %}
        {% else %}
          <div class="text-secondary">Пока не задана. Нажми «Цель».</div>
        {% endif %}

        <hr />
        <div class="fw-semibold mb-2">Последний вес</div>
        {% if latest_weight %}
          <div class="h4 mb-0">{{ latest_weight.weight_kg }} кг</div>
          <div class="text-secondary small">{{ latest_weight.date }}</div>
        {% else %}
          <div class="text-secondary">Нет данных. Нажми «Добавить вес».</div>
        {% endif %}
      </div>
    </div>

    <div class="col-12 col-lg-8">
      <div class="bg-white border rounded-3 p-3 h-100">
        <div class="fw-semibold mb-2">Калории за последние 14 дней</div>
        <div>
          {{ calories_chart_html|safe }}
        </div>
      </div>
    </div>
  </div>
{% endblock %}


